<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Find the right SF Tech Week events</title>
    <style>
      * { box-sizing: border-box; }
      
      body { 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
        margin: 0; 
        background: linear-gradient(135deg, #0b0c10 0%, #1a1d29 100%);
        color: #fff; 
        min-height: 100vh;
        line-height: 1.6;
      }
      
      .wrap { 
        max-width: 900px; 
        margin: 0 auto; 
        padding: 40px 24px; 
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      
      .card { 
        background: rgba(18, 20, 26, 0.8); 
        backdrop-filter: blur(20px);
        border: 1px solid rgba(34, 38, 49, 0.5); 
        border-radius: 20px; 
        padding: 32px; 
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
      }
      
      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
      }
      
      h1 { 
        font-size: 28px; 
        margin: 0 0 16px; 
        background: linear-gradient(135deg, #5b8cff, #8ab4ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
      }
      
      .subtitle {
        color: #a8b3cf;
        font-size: 16px;
        margin-bottom: 24px;
        line-height: 1.5;
      }
      
      textarea { 
        width: 100%; 
        min-height: 140px; 
        border-radius: 12px; 
        border: 2px solid rgba(48, 54, 69, 0.5); 
        background: rgba(14, 16, 22, 0.8); 
        color: #fff; 
        padding: 16px; 
        resize: vertical; 
        font-size: 16px;
        font-family: inherit;
        transition: all 0.3s ease;
        outline: none;
      }
      
      textarea:focus {
        border-color: #5b8cff;
        box-shadow: 0 0 0 3px rgba(91, 140, 255, 0.1);
        background: rgba(14, 16, 22, 0.9);
      }
      
      textarea::placeholder {
        color: #6b7280;
      }
      
      .row { 
        display: flex; 
        gap: 12px; 
        align-items: center; 
        margin-top: 20px; 
        flex-wrap: wrap;
      }
      
      button { 
        background: linear-gradient(135deg, #5b8cff, #4c6ef5);
        color: #fff; 
        border: none; 
        padding: 14px 24px; 
        border-radius: 12px; 
        cursor: pointer; 
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(91, 140, 255, 0.3);
      }
      
      button:hover:not([disabled]) {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(91, 140, 255, 0.4);
        background: linear-gradient(135deg, #4c6ef5, #3b5bdb);
      }
      
      button[disabled] { 
        opacity: 0.6; 
        cursor: not-allowed;
        transform: none;
      }
      
      .status {
        color: #a8b3cf;
        font-size: 14px;
        font-style: italic;
      }
      
      .results { 
        margin-top: 32px; 
        animation: fadeIn 0.5s ease;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .event { 
        padding: 20px; 
        border-bottom: 1px solid rgba(34, 38, 49, 0.5); 
        transition: all 0.3s ease;
        border-radius: 8px;
        margin-bottom: 8px;
        background: rgba(18, 20, 26, 0.3);
      }
      
      .event:hover {
        background: rgba(18, 20, 26, 0.6);
        transform: translateX(4px);
      }
      
      .event:last-child { 
        border-bottom: 0; 
        margin-bottom: 0;
      }
      
      .event-title {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 8px;
        color: #fff;
      }
      
      .event-meta {
        color: #a8b3cf;
        font-size: 14px;
        margin-bottom: 6px;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }
      
      .event-host {
        color: #8ab4ff;
        font-size: 14px;
        margin-bottom: 12px;
      }
      
      .event-link {
        color: #5b8cff;
        text-decoration: none;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s ease;
      }
      
      .event-link:hover {
        color: #8ab4ff;
        transform: translateX(2px);
      }
      
      .prefs-display {
        background: rgba(91, 140, 255, 0.1);
        border: 1px solid rgba(91, 140, 255, 0.2);
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 20px;
        font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
        font-size: 13px;
        color: #a8b3cf;
        overflow-x: auto;
      }
      
      .small { 
        color: #a8b3cf; 
        font-size: 14px; 
      }
      
      .mono { 
        font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace; 
      }
      
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid rgba(91, 140, 255, 0.3);
        border-radius: 50%;
        border-top-color: #5b8cff;
        animation: spin 1s ease-in-out infinite;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      .error {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #fca5a5;
        padding: 12px;
        border-radius: 8px;
        margin-top: 16px;
      }
      
      @media (max-width: 768px) {
        .wrap { padding: 20px 16px; }
        .card { padding: 24px; }
        h1 { font-size: 24px; }
        .row { flex-direction: column; align-items: stretch; }
        button { width: 100%; }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <h1>Find Your Perfect SF Tech Week Events</h1>
        <p class="subtitle">Tell us about your goals and we'll recommend the most relevant events for you. Whether you're looking for investors, co-founders, talent, or just want to network with like-minded people.</p>
        <textarea id="input" placeholder="I'm building a wellness tech platform and looking for co-founders and investors. I prefer evening events in SoMa and free or low-cost events."></textarea>
        <div class="row">
          <button id="go">üîç Find Events</button>
          <span id="status" class="status"></span>
        </div>
      </div>

      <div id="out" class="card results" hidden>
        <div class="prefs-display" id="prefs"></div>
        <div id="events"></div>
      </div>
    </div>

    <script>
      const $ = (id) => document.getElementById(id);
      const btn = $('go');
      const input = $('input');
      const status = $('status');
      const out = $('out');
      const prefsEl = $('prefs');
      const eventsEl = $('events');

      async function recommend() {
        const message = input.value.trim();
        if (!message) return;
        btn.disabled = true; status.innerHTML = '<div class="loading"></div> Finding the best events for you...';
        out.hidden = true; eventsEl.innerHTML = ''; prefsEl.textContent = '';
        try {
          const resp = await fetch('/api/recommend-events', {
            method: 'POST', headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message, limit: 10 })
          });
          const data = await resp.json();
          if (!data.ok) throw new Error(data.error || 'Failed');
          prefsEl.textContent = 'Parsed preferences: ' + JSON.stringify(data.prefs);
          eventsEl.innerHTML = data.results.map(r => `
            <div class="event">
              <div class="event-title">${r.name}</div>
              <div class="event-meta">
                <span>üìÖ ${r.date || 'TBA'}</span>
                <span>üïê ${r.time || 'TBA'}</span>
                <span>üìç ${r.location || 'TBA'}</span>
                <span>üí∞ ${r.price || 'TBA'}</span>
              </div>
              <div class="event-host">üë§ Host: ${r.host || 'TBA'}</div>
              <div><a href="${r.url}" target="_blank" rel="noopener" class="event-link">View details ‚Üí</a></div>
            </div>
          `).join('');
          out.hidden = false;
        } catch (e) {
          alert(e.message);
        } finally {
          btn.disabled = false; status.textContent = '';
        }
      }

      btn.addEventListener('click', recommend);
      input.addEventListener('keydown', (e) => { if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) recommend(); });
    </script>
  </body>
  </html>

